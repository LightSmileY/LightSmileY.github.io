webpackJsonp([2],{LUAW:function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"App",data:function(){var s=this;return{isLogin:!1,adminId:"",adminPassword:"",students:[],myInfo:{},title:"我的课表",columns:[],courses:[],ajaxMyCourses:[],sliceMyCourses:[],dataCount:0,pageSize:8,myCourseObj:{viewColumns:[{title:"课程id",key:"cid",align:"center"},{title:"课程名",key:"name",align:"center"},{title:"学分",key:"credit",align:"center"},{title:"操作",key:"action",width:200,align:"center",render:function(e,t){return e("div",[e("Button",{props:{type:"",size:"small"},style:{marginRight:"15px",color:"#fff"},on:{click:function(){s.showCourse(t.index)}}},"详情"),e("Button",{props:{type:"error",size:"small"},style:{color:"#fff"},on:{click:function(){s.$Modal.confirm({title:"确定退选该课程吗",onOk:function(){var e=s,i=e.courses[t.index].cid;e.$axios.delete("http://106.14.46.10:8082/TeachingAffairs/electCourse/deleteRecord",{params:{sid:e.myInfo.sid,cid:i}}).then(function(i){s.remove(t.index),console.log(i),e.$Message.success("退选成功"),e.login()}).catch(function(s){console.log(s),e.$Message.error("退选失败")})},onCancel:function(){s.$Message.info("取消退选")}})}}},"退选")])}}]},courseObj:{viewColumns:[{title:"课程id",key:"cid",align:"center"},{title:"课程名",key:"name",align:"center"},{title:"学分",key:"credit",align:"center"},{title:"操作",key:"action",width:200,align:"center",render:function(e,t){return e("div",[e("Button",{props:{size:"small"},style:{marginRight:"15px",color:"#fff"},on:{click:function(){s.showCourse(t.index)}}},"详情"),e("Button",{props:{type:"info",size:"small"},style:{color:"#fff"},on:{click:function(){s.$Modal.confirm({title:"确定选择该课程吗",onOk:function(){var e=s,i=e.courses[t.index].cid;e.$axios.post("http://106.14.46.10:8082/TeachingAffairs/electCourse/addRecord",e.$qs.stringify({sid:e.myInfo.sid,cid:i})).then(function(s){console.log(s),s.data.message3?e.$Message.error(s.data.message3):s.data.message2?e.$Message.error(s.data.message2):(e.$Message.success("选课成功"),e.remove(t.index),e.login())}).catch(function(s){console.log(s),e.$Message.error("选课失败")})},onCancel:function(){s.$Message.info("取消选课")}})}}},"选课")])}}]}}},methods:{login:function(){var s=this;s.$axios.post("http://106.14.46.10:8082/TeachingAffairs/login/student",s.$qs.stringify({snumber:s.adminId,password:s.adminPassword})).then(function(e){console.log(e),console.log("获取数据成功"),s.isLogin=!0,s.myCourseObj.myCourses=e.data.records,s.courseObj.myCourses=e.data.remains,s.$axios.get("http://106.14.46.10:8082/TeachingAffairs/student/findAllStudents").then(function(e){for(var t in console.log(e),console.log("获取数据成功"),s.students=e.data,s.students)s.students[t].snumber===s.adminId&&(s.myInfo=s.students[t],console.log(s.myInfo))}).catch(function(s){console.log(s),console.log("获取数据失败")})}).catch(function(s){console.log(s),console.log("获取数据失败")})},viewCourse:function(){this.title="我的课表",this.columns=this.myCourseObj.viewColumns,this.courses=this.myCourseObj.myCourses,this.handleListApprove()},addCourse:function(){this.title="可选课程",this.columns=this.courseObj.viewColumns,this.courses=this.courseObj.myCourses,this.handleListApprove()},showCourse:function(s){this.$Modal.info({title:"课程信息",content:"\n          课程号："+this.courses[s].cid+"<br>\n          课程名："+this.courses[s].name+"<br>\n          学分："+this.courses[s].credit+"\n        "})},remove:function(s){this.courses.splice(s,1),this.handleListApprove()},handleListApprove:function(){this.ajaxMyCourses=this.courses,this.dataCount=this.courses.length,this.courses.length<this.pageSize?this.sliceMyCourses=this.ajaxMyCourses:this.sliceMyCourses=this.ajaxMyCourses.slice(0,this.pageSize),console.log(this.sliceMyCourses)},changepage:function(s){var e=(s-1)*this.pageSize,t=s*this.pageSize;this.sliceMyCourses=this.ajaxMyCourses.slice(e,t)}},created:function(){this.columns=this.viewColumns,this.courses=this.myCourses,this.handleListApprove()}},n={render:function(){var s=this,e=s.$createElement,i=s._self._c||e;return i("div",{attrs:{id:"page"}},[s.isLogin?s._e():i("div",{staticClass:"loginMask"},[i("div",{staticClass:"login"},[i("div",{staticClass:"title"},[s._v("学生登录")]),s._v(" "),i("div",{staticClass:"input"},[i("Input",{attrs:{type:"text",placeholder:"学号"},model:{value:s.adminId,callback:function(e){s.adminId=e},expression:"adminId"}},[i("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),s._v(" "),i("div",{staticClass:"input"},[i("Input",{attrs:{type:"password",placeholder:"密码"},model:{value:s.adminPassword,callback:function(e){s.adminPassword=e},expression:"adminPassword"}},[i("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1),s._v(" "),i("div",{staticClass:"input btn"},[i("Button",{attrs:{type:"primary"},on:{click:s.login}},[s._v("登录")])],1)])]),s._v(" "),i("div",{staticClass:"body"},[i("div",{staticClass:"container"},[i("div",{staticClass:"info"},[i("div",{staticClass:"title"},[i("p",[s._v(s._s(s.title))]),s._v(" "),i("dl",[i("dt",[s._v(s._s(s.myInfo.snumber))]),s._v(" "),i("dd",[s._v(s._s(s.myInfo.name))])]),s._v(" "),i("div",{staticClass:"viewCourse",attrs:{title:"查看我的课程"},on:{click:s.viewCourse}},[i("img",{attrs:{src:t("ihlS")}})]),s._v(" "),i("div",{staticClass:"addCourse",attrs:{title:"添加新课程"},on:{click:s.addCourse}},[i("div",{staticClass:"add"},[s._v("+")])])]),s._v(" "),i("div",{staticClass:"main"},[i("div",{staticClass:"search"},[i("Input",{attrs:{"class-name":"input",search:"","enter-button":"搜索",placeholder:"输入课程名查询课程···","on-search":""}})],1),s._v(" "),i("Table",{attrs:{ellipsis:"true",columns:s.columns,data:s.sliceMyCourses}})],1),s._v(" "),i("div",{staticClass:"pagin"},[i("Page",{attrs:{total:s.dataCount,"page-size":s.pageSize,"show-total":"","class-name":"pagination"},on:{"on-change":s.changepage}})],1)])])])])},staticRenderFns:[]};var o=t("VU/8")(i,n,!1,function(s){t("gF0N")},null,null);e.default=o.exports},gF0N:function(s,e){},ihlS:function(s,e){s.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAFLklEQVR4Xu2ajZENQRDH+yIgA0SACBABIkAEiAARIAJEgAgQASJABIiA+l1tv5rr697u2Y9X7+ptV13V3e3OTPe///0xM3siRy4nR26/bABsDDhyBLYQOHICbElwC4EtBNZH4LKIXBeR2yJydfhh1RsiwjPkj4h8G37/OfzO39+HZ6tpuVYIYOhdEXk4GDrHAIB4KyIfRQRwFpWlAXggIk8WMDoyEjBeici7pVBYAgBojLefN/ReSr9oHpjAerOBmAvAPRF5WTCcWMZ7+oNh/E7sI4BITkDIFfzOz5UESYB4KiIfpiI+FQBiHMMBIBKMJnZRbmrssg4hxTpjYLAGQHSvMwUAEhvGawa3AEBL6NmtTOJFmMG8t4L3YBMgAHpZegHAcDziyVqG27UyIEiSAFGSKgB4+/0Qn3biX0O5+1xYkbimUmgPoHEPW7T+A6T2BGNTwkSMveS8hC73Kz1EBQCM/xSUttcDLTWZRQpjdE+VqGZ5dIPyVCErgHgnAyEDYMz4R4V4I4m9CZhTIMwpE1gnYwTgPpsCwhgAkfF/B4MypYhVwiZKlhUAeAd2QecsxKKQGGXCGADQHiNaqRpPbH8dSZYY0/YEWvdZj3DxBDpnIDAP79i8wP8Yf04iAEgujycaD+0x3nqeXp4KkpVHxrO+jWuYgBEZ8yIQyFfnKpgHAFQibqd4njEecyhLGNUjnh4Yf7MwiTeWYefylgUg8l6FfixAx0bctzLFeB3vGVJJvoz3xsIiANyx0AJAS2mp92IoYQXg5YfZF0D7sXa5MqfVCeWvVQYOVcrmFPoMwDmVFgC8jwGt9BjgJT4UzWI+s8XTCy9muYB5yUMkQA5kWtnp1QJAgqDVVSHjs3jW5Oj7thb3gJeBQLPTetJNaMEknmN2YdkCAFLtRqOH+qxtx1djNTOe5za3fOlsriyAO+e0APw2paua+NQAC0Dv+DEgbBj05AEPwN34FoB/RoOsTbYKzx2fMWHO/DRYlOdWTu3bAGggIdm1LWQvhfcZAmzBCYuq2ByyG39RkqBtalZJgrYMwgjqZbUM2vEXrgx6DQddGFvRihxqI+Qd5riNEEbaesn/evoBykt7etsDYAQye4u2ne6JfzZ1u7Z3WCBshXkOC2gx7X66mhC9ctMDoAXBhhXPqw1WtKuFqeFmiAWiXVRlL+51hPyPNhkgeoTzCLuFria/ydthVdA7EKkeSEQsql5eRJcu7E3OeC9AMzqNKh+I6Ly2rvP/KghjR2IAobdFeBRhD4LhxHq0fa6EIeuS9OxpVMic7FDU20r2gOCdz/WEAe/ieUDJzgOjGyuu6MhNbjnP+v1oP11NRniVyhJdZ2Vg4DkMy84UOBInz1gZNZ6XMwB4ZwwEcgXJLWuW8CDvZre9agCljgqQ3fqiG6XOC5vU+CoACgLKeJ7EO5SmjKLMQ4xCR1VY59NPYZiDdSqnPVQJvO7dO8Ac1sgcU2JASyuvOuhzqA4bMrpmtM+eAyCUt3cWOq6r76iEgFVo7FKSd9cCIjOcZIluWdicsWcKAEwQXV60ky/xcRPrQHXoPLb9rV66nGPXVAB0ompyaz+P0fhuP4HTT+mYt/1EJtvzV5NlGFZzAdCJoR4JqZrlszjPnmM463V9DeJNuhQALRCUL3sOnxlUfQ5rSMSzDdcFlwZA59W2FmbMBWOJj61WD4HMg15c0xPotpsM7n0qW+ktsrVHn6/FgFlK7XPwBsA+0T7EtTYGHKJX9qnTxoB9on2Ia20MOESv7FOno2fAfySlS1AsbtBeAAAAAElFTkSuQmCC"}});